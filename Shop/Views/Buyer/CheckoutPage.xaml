<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ProcurementApp.Views.Buyer.CheckoutPage"
             Title="ÐžÑ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°ÐºÐ°Ð·Ð°">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <!-- ðŸ“ Ð‘Ð»Ð¾Ðº Ð²Ð²Ð¾Ð´Ð° Ð°Ð´Ñ€ÐµÑÐ° Ð¸ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ð½Ð° ÐºÐ°Ñ€Ñ‚Ðµ -->
            <VerticalStackLayout>

                <Label Text="ÐÐ´Ñ€ÐµÑ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸" FontSize="Medium"/>

                <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                    <Entry Text="{Binding Address}"
                           Placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð°Ð´Ñ€ÐµÑ Ð¸Ð»Ð¸ Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð½Ð° ÐºÐ°Ñ€Ñ‚Ðµ"
                           Grid.Column="0"/>

                    <Button Text="ðŸ”"
                            Command="{Binding SearchAddressCommand}"
                            Grid.Column="1"
                            WidthRequest="40"
                            HeightRequest="40"
                            BackgroundColor="#512BD4"
                            TextColor="White"/>
                </Grid>

                <Button Text="ðŸ“ ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ Ð¼Ð¾Ðµ Ð¼ÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ"
                        Command="{Binding GetLocationCommand}"
                        BackgroundColor="#512BD4"
                        TextColor="White"
                        Margin="0,5,0,0"/>

                <!-- ðŸ—ºï¸ ÐšÐ°Ñ€Ñ‚Ð° -->
                <WebView x:Name="MapView"
                         Source="{Binding MapHtmlSource}"
                         HeightRequest="300"
                         WidthRequest="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=Width}"
                         Margin="0,10,0,20"
                         HorizontalOptions="FillAndExpand"/>
            </VerticalStackLayout>

            <!-- ðŸ’µ Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð·Ð°ÐºÐ°Ð·Ð° -->
            <Label Text="Ð¡ÑƒÐ¼Ð¼Ð° Ð·Ð°ÐºÐ°Ð·Ð°:" FontSize="Medium"/>
            <Label Text="{Binding TotalAmount, StringFormat='{0:C}'}" FontSize="Large"/>



            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ Ð¸Ð· Binding Ð¸ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
            <Button Text="{Binding DeliveryButtonText}"
                    Command="{Binding CalculateDeliveryCommand}"
                    BackgroundColor="#512BD4"
                    TextColor="White"
                    IsEnabled="{Binding IsNotCalculating}"/>

            <ActivityIndicator IsRunning="{Binding IsCalculating}"
                               IsVisible="{Binding IsCalculating}"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>

            <Label Text="Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸:" FontSize="Medium"/>
            <Label Text="{Binding DeliveryCost, StringFormat='{0:C}'}" FontSize="Large"/>

            <Label Text="ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸:" FontSize="Medium"/>
            <Label Text="{Binding EstimatedDays, StringFormat='{0} Ð´Ð½ÐµÐ¹'}" FontSize="Large"/>

            <Label Text="ÐŸÐ¾Ð³Ð¾Ð´Ð½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ:" FontSize="Medium"/>
            <Label Text="{Binding WeatherImpact}" FontSize="Small"/>

            <!-- ðŸ’° Ð˜Ñ‚Ð¾Ð³Ð¾ -->
            <Label Text="Ð˜Ñ‚Ð¾Ð³Ð¾ Ðº Ð¾Ð¿Ð»Ð°Ñ‚Ðµ:" FontSize="Medium" FontAttributes="Bold"/>
            <Label Text="{Binding TotalWithDelivery, StringFormat='{0:C}'}" FontSize="Large" FontAttributes="Bold"/>

            <!-- ðŸ›’ Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ -->
            <Button Text="ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·"
                    Command="{Binding PlaceOrderCommand}"
                    BackgroundColor="Green"
                    TextColor="White"
                    Margin="0,20,0,0"/>

            <Button Text="ÐÐ°Ð·Ð°Ð´"
                    Clicked="OnBackClicked"
                    BackgroundColor="Gray"
                    TextColor="White"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
